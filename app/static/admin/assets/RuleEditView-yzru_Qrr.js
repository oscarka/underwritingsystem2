import{d as C,k as h,x as V,y as E,b as c,e as a,g as l,w as p,D as R,t as f,l as g,A as D,aA as I,r as w,o as _,i as k}from"./vue-vendor-hvhEjQgQ.js";import{g as N,s as i,a as U,p as $,_ as A}from"./index-CMftDAuZ.js";const S={class:"rule-edit-page"},T={class:"page-header"},F={class:"header-left"},M={class:"header-actions"},j={class:"form-container"},q={class:"form-item"},z={key:0,class:"form-error"},G={class:"form-item"},H={key:0,class:"form-error"},J={class:"form-item"},K=C({__name:"RuleEditView",setup(L){const d=D(),u=I().params.id,r=h(()=>!!u),s=V({name:"",version:"",remark:""}),t=V({name:"",version:""}),y=async()=>{if(r.value)try{const o=await N(`/api/v1/underwriting/rules/${u}`);if(o.code===200){const e=o.data;s.name=e.name,s.version=e.version,s.remark=e.remark}else i("error",o.message||"加载失败")}catch(o){console.error("加载规则详情失败:",o),i("error","加载失败")}},b=()=>{let o=!0;return t.name="",t.version="",s.name||(t.name="请输入规则名称",o=!1),s.version||(t.version="请输入版本号",o=!1),o},x=async()=>{if(b())try{const o={name:s.name,version:s.version,remark:s.remark};let e;r.value?e=await U(`/api/v1/underwriting/rules/${u}`,o):e=await $("/api/v1/underwriting/rules",o),e.code===200?(i("success",r.value?"更新成功":"创建成功"),d.back()):i("error",e.message||(r.value?"更新失败":"创建失败"))}catch(o){console.error(r.value?"更新规则失败:":"创建规则失败:",o),i("error",r.value?"更新失败":"创建失败")}},B=()=>{d.back()};return E(()=>{y()}),(o,e)=>{const m=w("BaseButton"),v=w("BaseInput");return _(),c("div",S,[a("div",T,[a("div",F,[l(m,{onClick:e[0]||(e[0]=n=>R(d).back())},{default:p(()=>e[4]||(e[4]=[k("返回")])),_:1}),a("h1",null,f(r.value?"编辑规则":"新增规则"),1)]),a("div",M,[l(m,{onClick:B},{default:p(()=>e[5]||(e[5]=[k("取消")])),_:1}),l(m,{type:"primary",onClick:x},{default:p(()=>e[6]||(e[6]=[k("保存")])),_:1})])]),a("div",j,[a("div",q,[e[7]||(e[7]=a("label",null,"规则名称",-1)),l(v,{modelValue:s.name,"onUpdate:modelValue":e[1]||(e[1]=n=>s.name=n),placeholder:"请输入规则名称",maxlength:50},null,8,["modelValue"]),t.name?(_(),c("div",z,f(t.name),1)):g("",!0)]),a("div",G,[e[8]||(e[8]=a("label",null,"版本号",-1)),l(v,{modelValue:s.version,"onUpdate:modelValue":e[2]||(e[2]=n=>s.version=n),placeholder:"请输入版本号",maxlength:30,disabled:r.value},null,8,["modelValue","disabled"]),t.version?(_(),c("div",H,f(t.version),1)):g("",!0)]),a("div",J,[e[9]||(e[9]=a("label",null,"备注",-1)),l(v,{modelValue:s.remark,"onUpdate:modelValue":e[3]||(e[3]=n=>s.remark=n),type:"textarea",placeholder:"请输入备注信息",rows:3},null,8,["modelValue"])])])])}}}),W=A(K,[["__scopeId","data-v-c38fb75d"]]);export{W as default};
//# sourceMappingURL=RuleEditView-yzru_Qrr.js.map
