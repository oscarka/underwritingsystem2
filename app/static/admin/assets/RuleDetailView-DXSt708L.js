import{d as f,o as i,b as r,e as o,F as D,f as V,t as m,i as R,k as L,g as p,a as h,c as U,w as A,n as F,aq as j,q as H,aw as J,p as K,y as W,A as X,aA as Y,r as Z,l as I}from"./vue-vendor-hvhEjQgQ.js";import{_ as g,B as S}from"./index-soUPKp6E.js";import{r as b}from"./underwriting-WGKpY2Tf.js";const ee={class:"base-table"},te={class:"data-table"},se=f({__name:"BaseTable",props:{columns:{},data:{}},setup(n){return(l,t)=>(i(),r("div",ee,[o("table",te,[o("thead",null,[o("tr",null,[(i(!0),r(D,null,V(l.columns,s=>(i(),r("th",{key:s.key},m(s.title),1))),128))])]),o("tbody",null,[(i(!0),r(D,null,V(l.data,(s,y)=>(i(),r("tr",{key:y},[(i(!0),r(D,null,V(l.columns,d=>(i(),r("td",{key:d.key},[d.render?(i(),r(D,{key:0},[R(m(d.render(s[d.key],s)),1)],64)):(i(),r(D,{key:1},[R(m(s[d.key]),1)],64))]))),128))]))),128))])])]))}}),x=g(se,[["__scopeId","data-v-bda990fa"]]),ae={class:"disease-categories"},oe=f({__name:"DiseaseCategories",props:{data:{}},setup(n){const l=L(()=>[{key:"code",title:"编码"},{key:"name",title:"疾病大类名称"},{key:"displayOrder",title:"显示顺序"},{key:"updatedAt",title:"修改时间"}]);return(t,s)=>(i(),r("div",ae,[p(x,{columns:l.value,data:t.data},null,8,["columns","data"])]))}}),ne=g(oe,[["__scopeId","data-v-665304a6"]]),ie={class:"disease-list"},re=f({__name:"DiseaseList",props:{data:{},getCategoryName:{type:Function}},setup(n){const l=n,t=L(()=>[{key:"code",title:"编码"},{key:"name",title:"疾病名称"},{key:"categoryCode",title:"疾病大类",render:s=>l.getCategoryName(s)},{key:"isCommon",title:"是否常见疾病",render:s=>s?"是":"否"},{key:"updatedAt",title:"修改时间"}]);return(s,y)=>(i(),r("div",ie,[p(x,{columns:t.value,data:s.data},null,8,["columns","data"])]))}}),le=g(re,[["__scopeId","data-v-82c59049"]]),de={class:"question-list"},ce=f({__name:"QuestionList",props:{data:{}},setup(n){const l=L(()=>[{key:"code",title:"编码"},{key:"content",title:"问题内容"},{key:"questionType",title:"问题类型"},{key:"updatedAt",title:"修改时间"}]);return(t,s)=>(i(),r("div",de,[p(x,{columns:l.value,data:t.data},null,8,["columns","data"])]))}}),ue=g(ce,[["__scopeId","data-v-68822098"]]),_e={class:"answer-list"},pe=f({__name:"AnswerList",props:{data:{}},setup(n){const l=L(()=>[{key:"code",title:"编码"},{key:"content",title:"答案内容"},{key:"questionCode",title:"所属问题编码"},{key:"medicalDecision",title:"医疗险结论",render:t=>t||"-"},{key:"finalDecision",title:"重疾险结论",render:t=>t||"-"},{key:"remark",title:"备注",render:t=>t||"-"},{key:"updatedAt",title:"更新时间"}]);return(t,s)=>(i(),r("div",_e,[p(x,{columns:l.value,data:t.data},null,8,["columns","data"])]))}}),ve=g(pe,[["__scopeId","data-v-febf1e39"]]);var q=(n=>(n.DRAFT="草稿",n.ENABLED="已启用",n.DISABLED="已禁用",n.DELETED="已删除",n.IMPORTED="已导入",n))(q||{});const me={class:"toast-content"},ye={class:"toast-icon"},he={key:0,viewBox:"0 0 24 24",width:"16",height:"16"},fe={key:1,viewBox:"0 0 24 24",width:"16",height:"16"},ge={key:2,viewBox:"0 0 24 24",width:"16",height:"16"},ke={key:3,viewBox:"0 0 24 24",width:"16",height:"16"},we={class:"toast-message"},De=f({__name:"Toast",setup(n,{expose:l}){const t=h([]);let s=0;function y(c,u,_=3e3){const k=s++,E={id:k,type:c,message:u};t.value.push(E),setTimeout(()=>{d(k)},_)}function d(c){const u=t.value.findIndex(_=>_.id===c);u>-1&&t.value.splice(u,1)}return l({success:c=>y("success",c),error:c=>y("error",c),warning:c=>y("warning",c),info:c=>y("info",c)}),(c,u)=>(i(),U(H,{to:"body"},[p(j,{name:"toast",tag:"div",class:"toast-container"},{default:A(()=>[(i(!0),r(D,null,V(t.value,_=>(i(),r("div",{key:_.id,class:F(["toast",_.type])},[o("div",me,[o("span",ye,[_.type==="success"?(i(),r("svg",he,u[0]||(u[0]=[o("path",{fill:"currentColor",d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},null,-1)]))):_.type==="error"?(i(),r("svg",fe,u[1]||(u[1]=[o("path",{fill:"currentColor",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},null,-1)]))):_.type==="warning"?(i(),r("svg",ge,u[2]||(u[2]=[o("path",{fill:"currentColor",d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},null,-1)]))):(i(),r("svg",ke,u[3]||(u[3]=[o("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},null,-1)])))]),o("span",we,m(_.message),1)])],2))),128))]),_:1})]))}}),B=g(De,[["__scopeId","data-v-86602a5d"]]);let v=null;function T(n){var s;const l=p(n),t=document.createElement("div");return J(l,t),document.body.appendChild(t),(s=l.component)==null?void 0:s.exposed}const be={success(n){v||(v=T(B)),v.success(n)},error(n){v||(v=T(B)),v.error(n)},warning(n){v||(v=T(B)),v.warning(n)},info(n){v||(v=T(B)),v.info(n)}};function C(n){be.error(n)}const Ce={class:"rule-detail-page"},$e={class:"page-header"},Ie={class:"header-left"},Be={class:"version-tag"},Te={class:"header-actions"},Ve={class:"info-card"},Ae={class:"info-grid"},Re={class:"info-item"},Le={class:"info-item"},xe={class:"info-item"},Ee={key:0,class:"content-section"},qe={key:1,class:"content-section"},ze={key:2,class:"content-section"},Ne={key:3,class:"content-section"},Fe=f({__name:"RuleDetailView",setup(n){const l=X(),t=Y(),s=h("categories"),y=[{key:"categories",label:"疾病大类"},{key:"diseases",label:"疾病"},{key:"questions",label:"问题"},{key:"answers",label:"答案"}],d=h({id:"",name:"",version:"",status:q.DRAFT,created_at:"",updated_at:"",remark:"",description:""}),c=h([]),u=h([]),_=h([]),k=h([]),E=async()=>{try{const a=t.params.id;console.log("[RuleDetailView] 开始获取规则详情:",a);const e=await b.getRuleDetail(a);if(e.code===200&&e.data){const{created_at:w,updated_at:$,...N}=e.data;d.value={...N,status:N.status||q.DRAFT,created_at:w||"",updated_at:$||""},console.log("[RuleDetailView] 获取规则详情成功:",d.value)}}catch(a){console.error("[RuleDetailView] 获取规则详情失败:",a),C("获取规则详情失败")}},z=async()=>{try{const a=t.params.id,e=await b.getDiseaseCategories(a);e.code===200&&e.data&&(c.value=e.data)}catch(a){console.error("[RuleDetailView] 获取疾病类别失败:",a),C("获取疾病类别失败")}},M=async()=>{try{const a=t.params.id,e=await b.getDiseases(a);e.code===200&&e.data&&(u.value=e.data)}catch(a){console.error("[RuleDetailView] 获取疾病列表失败:",a),C("获取疾病列表失败")}},Q=async()=>{try{const a=t.params.id,e=await b.getRuleQuestions(a);e.code===200&&e.data&&(_.value=e.data)}catch(a){console.error("[RuleDetailView] 获取问题列表失败:",a),C("获取问题列表失败")}},O=async()=>{try{const a=t.params.id,e=await b.getRuleAnswers(a);e.code===200&&e.data&&(k.value=e.data)}catch(a){console.error("[RuleDetailView] 获取答案列表失败:",a),C("获取答案列表失败")}},G=a=>{const e=c.value.find(w=>w.id===a);return e?e.name:"-"},P=()=>{const a=t.params.id;l.push(`/underwriting/rules/${a}/edit`)};return K(s,async a=>{switch(a){case"categories":c.value.length===0&&await z();break;case"diseases":u.value.length===0&&await M();break;case"questions":_.value.length===0&&await Q();break;case"answers":k.value.length===0&&await O();break}}),W(async()=>{await E(),await z()}),(a,e)=>{const w=Z("BaseButton");return i(),r("div",Ce,[o("div",$e,[o("div",Ie,[o("h1",null,m(d.value.name),1),o("span",Be,m(d.value.version),1),o("span",{class:F(["status-badge",d.value.status])},m(d.value.status),3)]),o("div",Te,[p(w,{onClick:P},{default:A(()=>e[2]||(e[2]=[R("编辑规则")])),_:1}),p(w,{onClick:e[0]||(e[0]=$=>a.$router.back())},{default:A(()=>e[3]||(e[3]=[R("返回")])),_:1})])]),o("div",Ve,[o("div",Ae,[o("div",Re,[e[4]||(e[4]=o("label",null,"创建时间",-1)),o("span",null,m(d.value.created_at),1)]),o("div",Le,[e[5]||(e[5]=o("label",null,"更新时间",-1)),o("span",null,m(d.value.updated_at),1)]),o("div",xe,[e[6]||(e[6]=o("label",null,"备注",-1)),o("span",null,m(d.value.remark||"-"),1)])])]),p(S,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=$=>s.value=$),tabs:y},{default:A(()=>[s.value==="categories"?(i(),r("div",Ee,[p(ne,{data:c.value},null,8,["data"])])):I("",!0),s.value==="diseases"?(i(),r("div",qe,[p(le,{data:u.value,"get-category-name":G},null,8,["data"])])):I("",!0),s.value==="questions"?(i(),r("div",ze,[p(ue,{data:_.value},null,8,["data"])])):I("",!0),s.value==="answers"?(i(),r("div",Ne,[p(ve,{data:k.value},null,8,["data"])])):I("",!0)]),_:1},8,["modelValue"])])}}}),Ge=g(Fe,[["__scopeId","data-v-086874df"]]);export{Ge as default};
//# sourceMappingURL=RuleDetailView-DXSt708L.js.map
