import{d as C,p as B,r as f,q as N,v as F,f as l,x as k,w as r,F as T,g as e,B as R,t as c,c as p,h as v,j as _,k as V,o,n as g}from"./index-BHr1Dggr.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"result-page"},q={class:"result-card"},z={class:"conclusion-icon"},D={key:0},E={key:1},I={key:2},M={class:"conclusion-text"},U={class:"result-content"},A={class:"result-item"},G={class:"result-item"},H={class:"result-item"},J={class:"action-bar"},K=C({__name:"index",setup(L){const m=V(),a=B(),t=f(!1),i=f(null),n=N(()=>a.result||{decision:"manual_review",conclusion:"需人工核保",additionalFee:0,specialNotice:"暂无特别说明",insuranceType:"暂未确定",reason:""}),y=async()=>{i.value=null,t.value=!0;try{await a.evaluate()}catch{i.value="获取核保结论失败，请重试"}finally{t.value=!1}},b=()=>{a.reset(),m.replace("/")},h=async()=>{if(!t.value){t.value=!0;try{await a.evaluate(),g({type:"success",message:"投保申请已提交"}),a.reset(),m.replace("/")}catch(u){console.error("提交失败:",u),g({type:"fail",message:"提交失败，请重试"})}finally{t.value=!1}}};return F(()=>{a.result||y()}),(u,s)=>{const x=v("van-skeleton"),d=v("van-button"),w=v("van-empty");return o(),l("div",S,[t.value?(o(),k(x,{key:0,title:"",row:3})):i.value?(o(),k(w,{key:1,image:"error",description:i.value},{bottom:r(()=>[p(d,{round:"",type:"primary",onClick:y},{default:r(()=>s[0]||(s[0]=[_(" 重试 ")])),_:1})]),_:1},8,["description"])):(o(),l(T,{key:2},[e("div",q,[e("div",{class:R(["result-header",n.value.decision])},[e("div",z,[n.value.decision==="accept"?(o(),l("span",D,"✅")):n.value.decision==="reject"?(o(),l("span",E,"❌")):(o(),l("span",I,"⚠️"))]),e("h2",M,c(n.value.conclusion),1)],2),e("div",U,[e("div",A,[s[1]||(s[1]=e("label",null,"承保类型",-1)),e("span",null,c(n.value.insuranceType),1)]),e("div",G,[s[2]||(s[2]=e("label",null,"加费比例",-1)),e("span",null,c(n.value.additionalFee)+"%",1)]),e("div",H,[s[3]||(s[3]=e("label",null,"特别说明",-1)),e("span",null,c(n.value.specialNotice),1)])])]),e("div",J,[p(d,{round:"",block:"",type:"primary",loading:t.value,onClick:h},{default:r(()=>s[4]||(s[4]=[_(" 确认投保 ")])),_:1},8,["loading"]),p(d,{round:"",block:"",plain:"",onClick:b,style:{"margin-top":"12px"}},{default:r(()=>s[5]||(s[5]=[_(" 重新核保 ")])),_:1})])],64))])}}}),Q=j(K,[["__scopeId","data-v-b59968b8"]]);export{Q as default};
