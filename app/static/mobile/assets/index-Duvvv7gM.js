import{i as x,e as V,m as I,u as k,c as a,a as S,s as P,d as q,b as D,r as b,f as O,g as _,w as n,h as r,j as m,t as z,k as A,l as W,o as $,n as E}from"./index-Mvle93cn.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";let c;const R={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let j=V({},R);function F(){({instance:c}=I({setup(){const{state:u,toggle:d}=k();return()=>a(P,S(u,{"onUpdate:show":d}),null)}}))}function G(f){return x?new Promise((u,d)=>{c||F(),c.open(V({},j,f,{callback:i=>{(i==="confirm"?u:d)(i)}}))}):Promise.resolve(void 0)}const K={class:"basic-info"},L={class:"form-actions"},M=q({__name:"index",setup(f){const u=A(),d=W(),i=D(),l=b({name:"张三",age:30,gender:"male",height:175,weight:65,policyNumber:"P"+new Date().getTime(),idType:"id_card",idNumber:"110101199001011234",phone:"13800138000",email:"zhangsan@example.com"}),p=b(!1),y=o=>{const e=parseInt(o);return e>=18&&e<=80},w=o=>{const e=parseInt(o);return e>=140&&e<=200},h=o=>{const e=parseInt(o);return e>=30&&e<=150},N=o=>l.value.idType==="id_card"?/^\d{17}[\dX]$/.test(o):!0,C=async()=>{p.value=!0;try{if(console.log("正在保存用户信息...",l.value),i.setUserInfo(l.value),i.isComplete){const o=d.params.productId;await u.push(`/product/${o}/disease`)}else G({title:"提示",message:"请填写完整的信息"})}catch(o){console.error("保存失败:",o),E({type:"fail",message:"保存失败，请重试"})}finally{p.value=!1}};return(o,e)=>{const s=r("van-field"),g=r("van-radio"),v=r("van-radio-group"),B=r("van-cell-group"),T=r("van-button"),U=r("van-form");return $(),O("div",K,[e[12]||(e[12]=_("h1",{class:"page-title"},"基本信息",-1)),a(U,{onSubmit:C,class:"basic-info__form"},{default:n(()=>[a(B,{inset:""},{default:n(()=>[a(s,{modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.name=t),name:"name",label:"姓名",placeholder:"请输入姓名",rules:[{required:!0,message:"请输入姓名"}]},null,8,["modelValue"]),a(s,{modelValue:l.value.age,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.age=t),type:"digit",name:"age",label:"年龄",placeholder:"请输入年龄",rules:[{required:!0,message:"请输入年龄"},{validator:y,message:"年龄必须在18-80岁之间"}]},null,8,["modelValue","rules"]),a(s,{name:"gender",label:"性别"},{input:n(()=>[a(v,{modelValue:l.value.gender,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.gender=t),direction:"horizontal"},{default:n(()=>[a(g,{name:"male"},{default:n(()=>e[8]||(e[8]=[m("男")])),_:1}),a(g,{name:"female"},{default:n(()=>e[9]||(e[9]=[m("女")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(s,{modelValue:l.value.height,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.height=t),type:"digit",name:"height",label:"身高(CM)",placeholder:"请输入身高",rules:[{required:!0,message:"请输入身高"},{validator:w,message:"请输入有效身高(140-200cm)"}]},null,8,["modelValue","rules"]),a(s,{modelValue:l.value.weight,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.weight=t),type:"digit",name:"weight",label:"体重(KG)",placeholder:"请输入体重",rules:[{required:!0,message:"请输入体重"},{validator:h,message:"请输入有效体重(30-150kg)"}]},null,8,["modelValue","rules"]),a(s,{modelValue:l.value.policyNumber,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.policyNumber=t),name:"policyNumber",label:"保单号",placeholder:"请输入保单号",rules:[{required:!0,message:"请输入保单号"},{pattern:/^P\d{13}$/,message:"保单号格式不正确"}]},null,8,["modelValue"]),a(s,{name:"idType",label:"证件类型"},{input:n(()=>[a(v,{modelValue:l.value.idType,"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.idType=t),direction:"horizontal"},{default:n(()=>[a(g,{name:"id_card"},{default:n(()=>e[10]||(e[10]=[m("身份证")])),_:1}),a(g,{name:"passport"},{default:n(()=>e[11]||(e[11]=[m("护照")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(s,{modelValue:l.value.idNumber,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.idNumber=t),name:"idNumber",label:"证件号码",placeholder:"请输入证件号码",rules:[{required:!0,message:"请输入证件号码"},{validator:N,message:"请输入有效的证件号码"}]},null,8,["modelValue","rules"])]),_:1}),_("div",L,[a(T,{round:"",block:"",type:"primary","native-type":"submit",loading:p.value},{default:n(()=>[m(z(p.value?"保存中...":"下一步"),1)]),_:1},8,["loading"])])]),_:1})])}}}),Q=H(M,[["__scopeId","data-v-1bd871ff"]]);export{Q as default};
